.post{
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 24px;
  overflow: hidden;
}

.post-header{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
}

.post-header .avatar{
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #16a34a, #22c55e);
}

.post-image-wrap{
  position: relative;
  background: #000;
}
.post-image{
  display: block;
  width: 100%;
  /* memastikan gambar terlihat penuh tanpa terpotong */
  object-fit: contain;
  height: auto;
  max-height: 80vh;
  cursor: pointer;
}

/* Tombol khusus buka modal */
.open-modal{
  position: absolute;
  right: 12px;
  top: 12px;
  background: rgba(255,255,255,0.9);
  color: #111;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 6px 8px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}
.open-modal:hover{ background: #fff; }
.open-modal .icon svg{ width: 1.1em; height: 1.1em; }

/* Nav arrows */
.nav{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.45);
  color: #fff;
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 200ms ease;
}
.nav:hover{ background: rgba(0,0,0,0.6); }
.nav.prev{ left: 8px; }
.nav.next{ right: 8px; }

/* Dots indicator */
.dots{
  position: absolute;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  display: flex;
  gap: 6px;
}
.dot{
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255,255,255,0.6);
}
.dot.active{ background: var(--primary); }

/* Double tap heart */
.dbltap-heart{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(1);
  color: var(--primary);
  opacity: 0.95;
  animation: pulse 600ms ease forwards;
  pointer-events: none;
}
@keyframes pulse{
  0% { transform: translate(-50%, -50%) scale(0.7); opacity: 0; }
  20% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  80% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
}

.caption{
  padding: 12px 16px;
  line-height: var(--lh-normal);
  font-size: var(--font-sm);
}
.caption .tag{
  color: var(--primary);
  font-weight: 600;
}

.actions{
  display: flex;
  align-items: center;
  gap: 12px;
  row-gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid var(--border);
  flex-wrap: wrap;
}
.actions .like{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #fff;
  color: #111;
  cursor: pointer;
  transition: transform 120ms ease, background 200ms ease, color 200ms ease, border-color 200ms ease;
}
/* samakan gaya untuk comment dan share */
.actions .comment,
.actions .share{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #fff;
  color: #111;
  cursor: pointer;
  transition: transform 120ms ease, background 200ms ease, color 200ms ease, border-color 200ms ease;
}
.actions .like:hover,
.actions .comment:hover,
.actions .share:hover{ transform: translateY(-1px); }
.actions .like .icon{ color: var(--primary); display: inline-flex; }
.actions .comment .icon,
.actions .share .icon{ color: var(--primary); display: inline-flex; }
.actions .like .label,
.actions .comment .label,
.actions .share .label{ font-size: var(--font-sm); line-height: var(--lh-tight); }
.actions .like:hover{ transform: translateY(-1px); }
.actions .like .icon{ color: var(--primary); display: inline-flex; }
.actions .like.liked{
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
}
.actions .like.liked .icon{ color: #fff; }
.actions .likes{ color: var(--muted); font-size: var(--font-xs); line-height: var(--lh-normal); }
/* scale icons relative to text */
.actions .icon svg{ width: 1.1em; height: 1.1em; }
.actions .delete{
  margin-left: auto;
  color: #ef4444;
  background: transparent;
  border: none;
  cursor: pointer;
}

.comments{
  padding: 0 16px 12px;
}
.comment{
  display: flex;
  gap: 6px;
  margin-top: 6px;
  font-size: var(--font-sm);
  line-height: var(--lh-normal);
}
.comment strong{ color: #111; }
.comment-form{
  display: flex;
  gap: 8px;
  padding: 12px 16px 16px;
  border-top: 1px solid var(--border);
  position: sticky;
  bottom: 0;
  background: var(--bg);
  z-index: 10;
  box-shadow: 0 -2px 8px rgba(0,0,0,0.04);
}
.comment-form.fixed{
  position: fixed;
  left: 0; right: 0;
  bottom: env(safe-area-inset-bottom, 0);
  padding: 10px 12px calc(10px + env(safe-area-inset-bottom, 0));
  width: 100%;
}
/* Expanded state on mobile: increase z-index and stronger backdrop */
.comment-form.expanded{ z-index: 100; box-shadow: 0 -8px 24px rgba(0,0,0,0.12); border-top: 1px solid rgba(0,0,0,0.08); }

/* Backdrop overlay to dim content when typing on mobile */
.comment-overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.24);
  backdrop-filter: saturate(140%) blur(2px);
  z-index: 90;
}

.comment-form textarea{
  flex: 1;
  min-width: 0;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px 10px;
  font-size: var(--font-sm);
  line-height: var(--lh-normal);
  resize: none; /* auto-resize via JS */
  max-height: 180px; /* cap height */
  box-sizing: border-box; /* agar tidak melebihi box */
  width: 100%;
  overflow-y: auto; /* scroll saat mencapai batas */
}
.comment-actions{ display: inline-flex; align-items: center; gap: 8px; }
.comment-actions .char-count{ color: var(--muted); font-size: var(--font-xs); }
+/* Warna-kode untuk indikator sisa karakter */
+.comment-actions .char-count.warn{ color: #f59e0b; }
+.comment-actions .char-count.error{ color: #dc2626; font-weight: 600; }
.comment-actions button{ display: inline-flex; align-items: center; gap: 6px; background: var(--primary); color: #fff; border: none; border-radius: 8px; padding: 8px 12px; cursor: pointer; font-size: var(--font-sm); line-height: var(--lh-tight); }
.comment-actions button .icon svg{ width: 1.1em; height: 1.1em; }
/* Close button */
.comment-actions .close{ background: transparent; color: #111; border: 1px solid var(--border); padding: 6px 10px; border-radius: 8px; }
.comment-actions .close:hover{ background: #f7f7f7; }

@media (max-width: 640px){
  .post-image{ height: auto; max-height: 80vh; object-fit: contain; }
  .nav{ width: 40px; height: 40px; }
  .caption{ font-size: var(--font-sm); padding: 10px 12px; }
  .actions{ padding: 10px 12px; gap: 8px; row-gap: 6px; flex-wrap: wrap; }
  /* Perbesar padding agar lebih terbaca, khusus mobile */
  .comment-form{ padding: 12px 16px calc(12px + env(safe-area-inset-bottom, 0)); bottom: env(safe-area-inset-bottom, 0); }
  .comment-form.fixed{ left: 0; right: 0; bottom: env(safe-area-inset-bottom, 0); }
  .comment-form.expanded{ box-shadow: 0 -12px 28px rgba(0,0,0,0.16); }
  /* Perbesar font-size & padding textarea agar mudah dibaca */
  .comment-form textarea{ padding: 12px 14px; font-size: var(--font-md); line-height: var(--lh-relaxed); max-height: 35vh; box-sizing: border-box; width: 100%; }
  /* Susun aksi jadi kolom dengan tombol Kirim full-width */
  .comment-actions{ width: 100%; display: flex; flex-direction: column; gap: 10px; align-items: stretch; }
  .comment-actions .char-count{ font-size: var(--font-sm); }
  .comment-actions button{ justify-content: center; }
  .comment-actions button:not(.close){ width: 100%; }
  /* Hapus tombol close, tidak diperlukan */
}
   .actions .likes{ order: 2; }
   .actions .delete{ order: 3; }
}

@media (min-width: 641px) and (max-width: 1024px){
  .post-image{ aspect-ratio: 4 / 5; max-height: 80vh; }
}

@media (min-width: 1025px){
  .post-image{ aspect-ratio: 4 / 5; max-height: 70vh; }
}
/* Meta (author & time) */
.post-header .meta .author{ font-size: var(--font-md); line-height: var(--lh-tight); }
.post-header .meta .time{ font-size: var(--font-xs); line-height: var(--lh-normal); }